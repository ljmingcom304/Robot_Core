#用户登录
mutation LoginUser($username: String!, $password: String!) {
    loginUser(username: $username, password: $password) {
        token,user{id}
    }
}

#获取医生列表
query Doctors($offset:Int=0,$limit:Int=10,$sort:String,$type:String,
    $status:String,$start:Date,$end:Date,$user:ID,$query:String){
    doctors(offset:$offset,limit:$limit,sort:$sort,type:$type,
        status:$status,start:$start,end:$end,user:$user,query:$query){
        id,total,offset,more,cursor,data{
            ...doctor
        }
    }
}

#获取医生诊断列表
query Diagnoses($offset:Int=0,$limit:Int=40,$sort:String,$qType:String="Instant",$dType:String="",
    $status:String="Active",$user:ID,$query:String){
    quickDiagnosis:diagnoses(offset:$offset,limit:$limit,sort:$sort,type:$qType,
        status:$status,user:$user,query:$query){
        id,total,offset,more,cursor,data{
            ...diagnosis
        }
    }
    doctorDiagnosis:diagnoses(offset:$offset,limit:$limit,sort:$sort,type:$dType,
        status:$status,user:$user,query:$query){
        id,total,offset,more,cursor,data{
            ...diagnosis
        }
    }
}

#西医推荐医生列表
query WesternDiagnoses($offset:Int=0,$limit:Int=20,$sort:String,$type:String,
    $status:String="Active",$user:ID,$query:String){
    diagnoses(offset:$offset,limit:$limit,sort:$sort,type:$type,
        status:$status,user:$user,query:$query){
        id,total,offset,more,cursor,data{
            ...diagnosis
        }
    }
}

#获取医生接诊订单列表
query Orders($offset:Int=0,$limit:Int=100,$sort:String,$type:String,
    $status:String,$start:Date,$end:Date,$user:ID,$query:String,$doctor:ID){
    orders(offset:$offset,limit:$limit,sort:$sort,type:$type,
        status:$status,start:$start,end:$end,user:$user,query:$query,doctor:$doctor){
        id,total,offset,more,cursor,data{
            ...order
        }
    }
}

#医生订单状态更新
subscription OrderUpdated($user:ID!){
    orderUpdated(user:$user){
        id,start,end,status
    }
}

#获取医生接诊会话列表
query Sessions($offset:Int=0,$limit:Int=100,$sort:String,$type:String,
    $status:String,$start:Date,$end:Date,$user:ID,$query:String){
    sessions(offset:$offset,limit:$limit,sort:$sort,type:$type,
        status:$status,start:$start,end:$end,user:$user,query:$query){
        id,total,offset,more,cursor,data{
            ...session
        }
    }
}

#查询个人中心消息数量
query OrderCounts($query:String,$paying:String="Paying",
    $pending:String="Pending",$serving:String="Serving"){
    paying_orders:orders(query:$query,status:$paying){
        total
    }
    pending_order:orders(query:$query,status:$pending){
        total
    }
    serving_order:orders(query:$query,status:$serving){
        total
    }
}

#医生对象
fragment doctor on Doctor{
    fullname,nickname,mobile,idNumber,gender,
    setting,id,rank,department,specialty,intro,
    area,title,tags,hospital{...hospital},
    photo{...file},idcards{...file},certificates{...file},
    accid,token,type,status
}

#用户对象
fragment user on User{
    username,mobile,status,roles
}

#患者对象
fragment patient on Patient{
    uid,fullname,age,gender,photo,dob
}

#诊断对象
fragment diagnosis on Diagnosis{
    id,price,duration,type,status,doctor{...doctor}
}

#订单对象
fragment order on Order{
    id,start,end,price,body,session{...session},doctor{...doctor},patient{...patient},
    diagnosis{...diagnosis},files{...file},status
}

#会话对象
fragment session on Session{
    start,end,body,,files{...file},messages{...message},type,status
}

#医院对象
fragment hospital on Hospital{
    name,address{...address},level
}

#地址对象
fragment address on Address{
    lantitude,longitude
}

#消息对象
fragment message on Message{
    title,body,type,status
}

#文件对象
fragment file on File{
    url
}





